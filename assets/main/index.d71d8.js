window.__require=function t(e,o,n){function i(a,c){if(!o[a]){if(!e[a]){var s=a.split("/");if(s=s[s.length-1],!e[s]){var u="function"==typeof __require&&__require;if(!c&&u)return u(s,!0);if(r)return r(s,!0);throw new Error("Cannot find module '"+a+"'")}a=s}var p=o[a]={exports:{}};e[a][0].call(p.exports,function(t){return i(e[a][1][t]||t)},p,p.exports,t,e,o,n)}return o[a].exports}for(var r="function"==typeof __require&&__require,a=0;a<n.length;a++)i(n[a]);return i}({AudioManager:[function(t,e,o){"use strict";cc._RF.push(e,"8bd60F3ofNOG77eHvV1puGt","AudioManager");var n,i=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),r=this&&this.__decorate||function(t,e,o,n){var i,r=arguments.length,a=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,o,n);else for(var c=t.length-1;c>=0;c--)(i=t[c])&&(a=(r<3?i(a):r>3?i(e,o,a):i(e,o))||a);return r>3&&a&&Object.defineProperty(e,o,a),a};Object.defineProperty(o,"__esModule",{value:!0});var a=cc._decorator,c=a.ccclass,s=a.property,u=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.crashland=null,e.fastPlaneWarn=null,e.landed=null,e.menu=null,e.menuOption=null,e.plane=null,e.proximityWarning=null,e.runway=null,e.zeppelinArriving=null,e.mute=!1,e}return i(e,t),e.prototype.onLoad=function(){},e.prototype.toggleMute=function(){return this.mute=!this.mute,this.mute},e.prototype.playEffect=function(t,e,o){var n=this;if(void 0===o&&(o=!1),!this.mute||o){var i="__"+t.name;if(!this[i]){this[i]=!0;var r=cc.audioEngine.playEffect(t,e);cc.audioEngine.setFinishCallback(r,function(){n[i]=!1})}}},e.prototype.Crashland=function(){return this.playEffect(this.crashland,!1)},e.prototype.FastPlaneWarn=function(){return this.playEffect(this.fastPlaneWarn,!1)},e.prototype.Landed=function(){return this.playEffect(this.landed,!1)},e.prototype.Menu=function(){return this.playEffect(this.menu,!1)},e.prototype.MenuOption=function(t){return void 0===t&&(t=!1),this.playEffect(this.menuOption,!1,t)},e.prototype.Plane=function(){return this.playEffect(this.plane,!1)},e.prototype.ProximityWarning=function(){return this.playEffect(this.proximityWarning,!1)},e.prototype.Runway=function(){return this.playEffect(this.runway,!1)},e.prototype.ZeppelinArriving=function(){return this.playEffect(this.zeppelinArriving,!1)},r([s({type:cc.AudioClip})],e.prototype,"crashland",void 0),r([s({type:cc.AudioClip})],e.prototype,"fastPlaneWarn",void 0),r([s({type:cc.AudioClip})],e.prototype,"landed",void 0),r([s({type:cc.AudioClip})],e.prototype,"menu",void 0),r([s({type:cc.AudioClip})],e.prototype,"menuOption",void 0),r([s({type:cc.AudioClip})],e.prototype,"plane",void 0),r([s({type:cc.AudioClip})],e.prototype,"proximityWarning",void 0),r([s({type:cc.AudioClip})],e.prototype,"runway",void 0),r([s({type:cc.AudioClip})],e.prototype,"zeppelinArriving",void 0),r([s],e.prototype,"mute",void 0),r([c],e)}(cc.Component);o.default=u,cc._RF.pop()},{}],AutoFitCanvas:[function(t,e,o){"use strict";cc._RF.push(e,"46c74V5oHhNnZmMsyNlCq23","AutoFitCanvas");var n,i=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),r=this&&this.__decorate||function(t,e,o,n){var i,r=arguments.length,a=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,o,n);else for(var c=t.length-1;c>=0;c--)(i=t[c])&&(a=(r<3?i(a):r>3?i(e,o,a):i(e,o))||a);return r>3&&a&&Object.defineProperty(e,o,a),a};Object.defineProperty(o,"__esModule",{value:!0});var a=cc._decorator,c=a.ccclass,s=a.property,u=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.designForPortrait=!1,e}return i(e,t),e.prototype.onLoad=function(){var t=this;cc.view.setResizeCallback(function(){return t.adaptCanvas()}),this.adaptCanvas()},e.prototype.adaptCanvas=function(){var t=cc.view.getFrameSize();t.width/t.height>cc.Canvas.instance.designResolution.width/cc.Canvas.instance.designResolution.height?this.setFitWidth():this.setFitHeight()},e.prototype.setFitHeight=function(){var t=this.designForPortrait;cc.Canvas.instance.fitHeight=!t,cc.Canvas.instance.fitWidth=t},e.prototype.setFitWidth=function(){var t=this.designForPortrait;cc.Canvas.instance.fitHeight=t,cc.Canvas.instance.fitWidth=!t},r([s(cc.Boolean)],e.prototype,"designForPortrait",void 0),r([c],e)}(cc.Component);o.default=u,cc._RF.pop()},{}],Canvas:[function(t,e,o){"use strict";cc._RF.push(e,"35411n5UyFMR47U6uDjT67z","Canvas");var n,i=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),r=this&&this.__decorate||function(t,e,o,n){var i,r=arguments.length,a=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,o,n);else for(var c=t.length-1;c>=0;c--)(i=t[c])&&(a=(r<3?i(a):r>3?i(e,o,a):i(e,o))||a);return r>3&&a&&Object.defineProperty(e,o,a),a};Object.defineProperty(o,"__esModule",{value:!0});var a=t("./AutoFitCanvas"),c=t("./Level"),s=t("./UIManager"),u=t("./AudioManager"),p=t("./Constant"),l=t("./Storage"),d=cc._decorator,h=d.ccclass,f=d.property,y=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.uiManager=null,e.audioManager=null,e.levels=[],e.debug=!1,e.level=null,e}var o;return i(e,t),o=e,e.prototype.onLoad=function(){t.prototype.onLoad.call(this),o.instance=this,l.default.debug=this.debug;var e=cc.director.getCollisionManager();e.enabled=!0,this.debug&&(e.enabled,e.enabledDebugDraw=!0),this.initEvents()},e.prototype.start=function(){this.setLevel(this.getLevelIndex()),this.uiManager.setState(s.default.State.Initial)},e.prototype.initEvents=function(){var t=this;this.node.on(p.EventType.CRASHED,function(){return t.onCrashed()}),this.node.on(p.EventType.SCORE_CHANGED,function(){return t.onScoreChanged()}),this.node.on(p.EventType.SPEED_CHANGED,function(){return t.onSpeedChanged()})},e.prototype.getLevel=function(){return l.default.level},e.prototype.getLevelIndex=function(){var t=this.levels.indexOf(l.default.level);return t>=0?t:0},e.prototype.setLevel=function(t){var e=this;this.levels.forEach(function(o,n){t===n?(l.default.level=o,e.uiManager.updateMainMenu(o.mapName),o.demo()):o.unload()})},e.prototype.previousLevel=function(){this.audioManager.MenuOption();var t=this.levels.length,e=(this.getLevelIndex()+t-1)%t;this.setLevel(e)},e.prototype.nextLevel=function(){this.audioManager.MenuOption();var t=this.levels.length,e=(this.getLevelIndex()+1)%t;this.setLevel(e)},e.prototype.onCrashed=function(){console.log("crashed"),this.uiManager.setState(s.default.State.End)},e.prototype.onScoreChanged=function(){this.uiManager.updateGameUIScore(this.getLevel().node.uuid)},e.prototype.onSpeedChanged=function(){var t=this.getLevel().gameSpeed>1;this.uiManager.setSpeedButtonToggled(t)},e.prototype.pause=function(){console.log("pause"),this.audioManager.Menu(),this.uiManager.setState(s.default.State.Pause)},e.prototype.resume=function(){console.log("resume"),this.audioManager.MenuOption(),this.uiManager.setState(s.default.State.Play)},e.prototype.toggleSpeedup=function(){console.log("toggleSpeedup"),this.audioManager.MenuOption(),this.getLevel().toggleSpeedup()},e.prototype.toggleMute=function(){console.log("toggleMute"),this.audioManager.MenuOption(!0);var t=this.audioManager.toggleMute();this.uiManager.setMuteButtonToggled(t)},e.prototype.exit=function(){console.log("exit"),this.audioManager.Menu(),this.start()},e.prototype.restart=function(){console.log("restart"),this.audioManager.MenuOption(),this.getLevel().restart(),this.uiManager.setState(s.default.State.Play)},e.prototype.addButtonClicked=function(){console.log("Add fly"),this.audioManager.MenuOption(),this.getLevel().addRandomFly()},e.prototype.showInterstitialAds=function(){console.log("showInterstitialAds")},e.instance=null,r([f(s.default)],e.prototype,"uiManager",void 0),r([f(u.default)],e.prototype,"audioManager",void 0),r([f([c.default])],e.prototype,"levels",void 0),r([f],e.prototype,"debug",void 0),o=r([h],e)}(a.default);o.default=y,cc._RF.pop()},{"./AudioManager":"AudioManager","./AutoFitCanvas":"AutoFitCanvas","./Constant":"Constant","./Level":"Level","./Storage":"Storage","./UIManager":"UIManager"}],Constant:[function(t,e,o){"use strict";cc._RF.push(e,"4a9b7r2Ll1FTIvfoZqL1+83","Constant"),Object.defineProperty(o,"__esModule",{value:!0}),o.EventType=void 0,function(t){t.CONNECTED="Connected",t.DISCONNECTED="disconnected",t.CRASHED="Crashed",t.PROXIMITY_WARNING="ProximityWarning",t.ARRIVED="Arrived",t.SCORE_CHANGED="ScoredChanged",t.SPEED_CHANGED="SpeedChanged",t.OUT_OF_VIEW="OutOfView",t.ENTER_VIEW="EnterView"}(o.EventType||(o.EventType={})),cc._RF.pop()},{}],CrashCollider:[function(t,e,o){"use strict";cc._RF.push(e,"c1944U+HoREer+A25P5sueW","CrashCollider");var n,i=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),r=this&&this.__decorate||function(t,e,o,n){var i,r=arguments.length,a=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,o,n);else for(var c=t.length-1;c>=0;c--)(i=t[c])&&(a=(r<3?i(a):r>3?i(e,o,a):i(e,o))||a);return r>3&&a&&Object.defineProperty(e,o,a),a};Object.defineProperty(o,"__esModule",{value:!0});var a=t("./Constant"),c=cc._decorator,s=c.ccclass,u=c.property,p=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.warningAnimation=1,e._crashed=!1,e._opacity=0,e._timer=0,e}return i(e,t),e.prototype.onLoad=function(){this.node.active=!0,this._opacity=this.node.opacity,this.node.opacity=0},e.prototype.onCollisionEnter=function(t,e){0===e.tag&&0===t.tag&&(this._crashed=!0,this.node.dispatchEvent(new cc.Event.EventCustom(a.EventType.CRASHED,!0))),1===e.tag&&1===t.tag&&this.node.dispatchEvent(new cc.Event.EventCustom(a.EventType.PROXIMITY_WARNING,!0))},e.prototype.onCollisionExit=function(t,e){1===e.tag&&1===t.tag&&(this.node.opacity=0),0===e.tag&&0===t.tag&&(this._crashed=!1)},e.prototype.onCollisionStay=function(t,e){this._crashed||1!==e.tag||1!==t.tag||this.animateWarning()},e.prototype.animateWarning=function(){var t,e=this._timer%this.warningAnimation/this.warningAnimation;t=e>.5?cc.misc.lerp(0,this._opacity,2*(e-.5)):cc.misc.lerp(this._opacity,0,2*e),this.node.opacity=t},e.prototype.update=function(t){this._timer+=t},r([u],e.prototype,"warningAnimation",void 0),r([s],e)}(cc.Component);o.default=p,cc._RF.pop()},{"./Constant":"Constant"}],DestinationNode:[function(t,e,o){"use strict";cc._RF.push(e,"016130NYclJEqlmk32y3Wy5","DestinationNode");var n,i=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),r=this&&this.__decorate||function(t,e,o,n){var i,r=arguments.length,a=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,o,n);else for(var c=t.length-1;c>=0;c--)(i=t[c])&&(a=(r<3?i(a):r>3?i(e,o,a):i(e,o))||a);return r>3&&a&&Object.defineProperty(e,o,a),a};Object.defineProperty(o,"__esModule",{value:!0});var a=cc._decorator,c=a.ccclass,s=a.property,u=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.flys=[],e}return i(e,t),e.prototype.getDistance=function(t){t=this.node.convertToWorldSpaceAR(t);var e=this.node.convertToWorldSpaceAR(this.node.getPosition());return cc.Vec2.distance(e,t)},e.prototype.landable=function(t){return this.getDistance(t)<=10},e.prototype.navigable=function(){return!0},e.prototype.connect=function(){return[]},r([s([cc.Prefab])],e.prototype,"flys",void 0),r([c],e)}(cc.Component);o.default=u,cc._RF.pop()},{}],Fly:[function(t,e,o){"use strict";cc._RF.push(e,"cdf24LGm19Ni6sw0oUqiHX6","Fly");var n,i=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),r=this&&this.__decorate||function(t,e,o,n){var i,r=arguments.length,a=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,o,n);else for(var c=t.length-1;c>=0;c--)(i=t[c])&&(a=(r<3?i(a):r>3?i(e,o,a):i(e,o))||a);return r>3&&a&&Object.defineProperty(e,o,a),a};Object.defineProperty(o,"__esModule",{value:!0});var a=t("./MovableObject"),c=t("./Constant"),s=t("./util"),u=t("./Storage"),p=cc._decorator,l=p.ccclass,d=p.property,h=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.directionLine=null,e.movableObject=null,e.warningEffect=null,e.warningEffectAnimation=1.5,e.disableWarningEffect=!1,e.directionLineHighlightScale=2,e.lineStrokeInterval=10,e.connectedDestinationNode=null,e.runways=[],e._directionLine=null,e._directionLineWidth=1,e._warningEffectNode=null,e._warningEffectTimer=0,e._isTouchMoving=!1,e.outOfViewPos=null,e.positionAt={},e}return i(e,t),e.prototype.onLoad=function(){if(this.directionLine){var t=cc.instantiate(this.directionLine);this._directionLine=t.getComponent(cc.Graphics),this.node.addChild(t),t.setSiblingIndex(0),this._directionLineWidth=this._directionLine.lineWidth}this.warningEffect&&(this._warningEffectNode=cc.instantiate(this.warningEffect),this._warningEffectNode.active=!1,this.node.addChild(this._warningEffectNode)),this.initEvents()},e.prototype.initEvents=function(){var t=this;this.movableObject.node.on(cc.Node.EventType.TOUCH_START,function(){t.setNavigations([]),t.movableObject.movable=!1,t.highlightRunway(!0),t.disconnectFromDestination()},this),this.movableObject.node.on(cc.Node.EventType.TOUCH_MOVE,function(e){if(!t.connectedDestinationNode){var o=e.getLocation(),n=cc.Canvas.instance.node.convertToNodeSpaceAR(o);if(!t.movableObject.isOutside(n)){var i=t.movableObject.getPosition();t.isTouchMovable(i,n)&&(t.movableObject.movable=!0,t.touchMove(n))}}},this);var e=function(){t.movableObject.movable=!0,t._isTouchMoving=!1,t.highlightRunway(!1),t.movableObject.setState(a.State.INITIAL)};this.movableObject.node.on(cc.Node.EventType.TOUCH_CANCEL,e),this.movableObject.node.on(cc.Node.EventType.TOUCH_END,e)},e.prototype.getPosition=function(){return this.movableObject.getPosition()},e.prototype.detectOutOfView=function(t,e){if(this.movableObject.isOutside(e)){if(!this.outOfViewPos){var o=s.calculateOutOfViewPos(e),n=o.intersection,i=o.positionAt;n&&(this.outOfViewPos=n,this.positionAt=i)}this.outOfViewPos&&this.setWarningEffect(t,this.outOfViewPos,this.positionAt)}else this.outOfViewPos&&(this.outOfViewPos=null,this._warningEffectNode&&(this._warningEffectNode.active=!1))},e.prototype.setWarningEffect=function(t,e,o){if(this._warningEffectNode&&(this._warningEffectNode.active=!this.disableWarningEffect,!this.disableWarningEffect)){this.animateWarningEffect(t);var n=this.getWarningPosition(e,o);this._warningEffectNode.x=n.x,this._warningEffectNode.y=n.y}},e.prototype.animateWarningEffect=function(t){this._warningEffectTimer+=t;var e,o=this._warningEffectTimer%this.warningEffectAnimation/this.warningEffectAnimation;e=o>.5?cc.misc.lerp(.45,.6,2*(o-.5)):cc.misc.lerp(.6,.45,2*o),this._warningEffectNode.scale=e},e.prototype.getWarningPosition=function(t,e){var o=this._warningEffectNode.getContentSize(),n=this._warningEffectNode.scaleX*o.width,i=this._warningEffectNode.scaleY*o.height;return e.top?this.node.convertToNodeSpaceAR(cc.v2(t.x,t.y-i/2)):e.right?this.node.convertToNodeSpaceAR(cc.v2(t.x-n/2,t.y)):e.bottom?this.node.convertToNodeSpaceAR(cc.v2(t.x,t.y+i/2)):e.left?this.node.convertToNodeSpaceAR(cc.v2(t.x+n/2,t.y)):void 0},e.prototype.dispatchEvent=function(t){this.node.dispatchEvent(new cc.Event.EventCustom(t,!0))},e.prototype.isLandableAt=function(t){return this.connectedDestinationNode&&this.getNavigationsLength()<=1&&this.connectedDestinationNode.landable(t)},e.prototype.getNavigations=function(){return this.movableObject.navigations},e.prototype.getNavigationsLength=function(){return this.movableObject.navigations.length},e.prototype.setNavigations=function(t){this.movableObject.navigations=t},e.prototype.addNavigations=function(t){this.movableObject.navigations.push(t)},e.prototype.getNavigableRunway=function(t,e){for(var o=0,n=this.runways;o<n.length;o++){var i=n[o];if(i.navigable(t,e))return i}},e.prototype.isTouchMovable=function(t,e){return cc.Vec2.distance(t,e)>35},e.prototype.setLastPos=function(t,e){if(!(e.length<1)){var o=t.length,n=!0;return o>1&&(n=cc.Vec2.distance(t[o-1],t[o-2])>=this.lineStrokeInterval),n||(t[o-1]=e[0],e.shift()),t.concat(e)}},e.prototype.touchMove=function(t){var e=this.getNavigations(),o=this.movableObject.getPosition(),n=e.length,i=n>0?e[n-1]:o,r=this.getNavigableRunway(t,i),a=[t];r?(this.connectToDestination(r),a=r.connect(e)):this.disconnectFromDestination(),e=this.setLastPos(e,a),this.setNavigations(e)},e.prototype.connectToDestination=function(t){this._isTouchMoving=!1,this.connectedDestinationNode=t,this.movableObject.setState(a.State.PILOTED),this.dispatchEvent(c.EventType.CONNECTED)},e.prototype.disconnectFromDestination=function(){this._isTouchMoving=!0,this.connectedDestinationNode=null,this.movableObject.setState(a.State.UNPILOTED),this.dispatchEvent(c.EventType.DISCONNECTED)},e.prototype.highlightRunway=function(t){t?this.runways.forEach(function(t){return t.node.opacity=255}):this.runways.forEach(function(t){return t.node.opacity=0})},e.prototype.drawDirectionLine=function(t){var e=this._directionLine;if(e){var o=this.getNavigations();o.length<1||(this._isTouchMoving?(this._directionLine.strokeColor=cc.color(255,255,255),this._directionLine.lineWidth=this._directionLineWidth*this.directionLineHighlightScale):(this._directionLine.strokeColor=cc.color(255,255,255,128),this._directionLine.lineWidth=this._directionLineWidth),e.clear(),this._isTouchMoving?s.drawQuadraticDashedCurve(e,t,o):s.drawQuadraticCurve(e,t,o),u.default.debug&&s.drawPoints(e,o))}},e.prototype.setPause=function(t){this.movableObject.paused=t},e.prototype.changeSpeed=function(t){this.movableObject.changeSpeed(t)},e.prototype.applyTransform=function(t,e){void 0===e&&(e=0),this.movableObject.applyTransform(t,e)},e.prototype.update=function(t){var e=this.movableObject.node.getPosition();if(this.drawDirectionLine(e),this.isLandableAt(e))return this.dispatchEvent(c.EventType.ARRIVED);this.detectOutOfView(t,e)},r([d(cc.Prefab)],e.prototype,"directionLine",void 0),r([d(a.default)],e.prototype,"movableObject",void 0),r([d(cc.Prefab)],e.prototype,"warningEffect",void 0),r([d],e.prototype,"warningEffectAnimation",void 0),r([d],e.prototype,"disableWarningEffect",void 0),r([d],e.prototype,"directionLineHighlightScale",void 0),r([l],e)}(cc.Component);o.default=h,cc._RF.pop()},{"./Constant":"Constant","./MovableObject":"MovableObject","./Storage":"Storage","./util":"util"}],Helipad:[function(t,e,o){"use strict";cc._RF.push(e,"d0345KWLUlCOIjDjU/mFhL8","Helipad");var n,i=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),r=this&&this.__decorate||function(t,e,o,n){var i,r=arguments.length,a=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,o,n);else for(var c=t.length-1;c>=0;c--)(i=t[c])&&(a=(r<3?i(a):r>3?i(e,o,a):i(e,o))||a);return r>3&&a&&Object.defineProperty(e,o,a),a};Object.defineProperty(o,"__esModule",{value:!0});var a=t("./DestinationNode"),c=cc._decorator,s=c.ccclass,u=c.property,p=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.innerCollider=null,e}return i(e,t),e.prototype.onLoad=function(){var t,e=this.node.group;null===(t=this.innerCollider)||void 0===t||(t.node.group=e)},e.prototype.navigable=function(t){var e=this.innerCollider.radius*this.node.scale;return this.getDistance(t)<=e},e.prototype.connect=function(){return[this.node.getPosition()]},r([u(cc.CircleCollider)],e.prototype,"innerCollider",void 0),r([s],e)}(a.default);o.default=p,cc._RF.pop()},{"./DestinationNode":"DestinationNode"}],Level:[function(t,e,o){"use strict";cc._RF.push(e,"6b4e4+I7aFHe4el6D0Tgjhe","Level");var n,i=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),r=this&&this.__decorate||function(t,e,o,n){var i,r=arguments.length,a=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,o,n);else for(var c=t.length-1;c>=0;c--)(i=t[c])&&(a=(r<3?i(a):r>3?i(e,o,a):i(e,o))||a);return r>3&&a&&Object.defineProperty(e,o,a),a};Object.defineProperty(o,"__esModule",{value:!0});var a=t("./AudioManager"),c=t("./Fly"),s=t("./Constant"),u=t("./DestinationNode"),p=t("./Storage"),l=cc._decorator,d=l.ccclass,h=l.property,f=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.mapName="",e.audioManager=null,e.runways=[],e.minDuration=3,e.maxDuration=6,e.frameExtendedSize=150,e.demoMode=!1,e._flys={},e._flyNamesMap={},e.timeConsumed=0,e.score=0,e.timer=0,e.duration=0,e.gameSpeed=1,e}return i(e,t),e.prototype.onLoad=function(){this.initFlyNamesMap()},e.prototype.initFlyNamesMap=function(){for(var t=0,e=this.runways;t<e.length;t++)for(var o=e[t],n=0,i=o.flys;n<i.length;n++){var r=i[n],a=r.name;this._flyNamesMap[a]||(this._flyNamesMap[a]={runways:[]}),this._flyNamesMap[a].flyPrefab=r,this._flyNamesMap[a].runways.push(o)}},e.prototype.demo=function(){this.setCollisionEnable(!1),this.reset(),this.demoMode=!0,this.addDemoFly(),this.node.active=!0},e.prototype.unload=function(){this.reset(),this.node.active=!1},e.prototype.isSpotAvalible=function(t,e){var o=cc.winSize.width,n=cc.winSize.height,i=e+(o>n?n:o)/4,r=!0;for(var a in this._flys){var c=this.getFly(a).getPosition();if(cc.Vec2.distance(t,c)<i){r=!1;break}}return r},e.prototype.getRandomSpot=function(t){void 0===t&&(t=this.frameExtendedSize);var e=Math.abs(t),o=cc.winSize.width+e,n=cc.winSize.height+e,i={angle:0};Math.random()>=.5?(i.x=cc.misc.lerp(-e,o,Math.random()),i.y=Math.random()>=.5?-e:n):(i.x=Math.random()>=.5?-e:o,i.y=cc.misc.lerp(-e,n,Math.random()));var r=cc.Canvas.instance.node.convertToNodeSpaceAR(cc.v2(i.x,i.y));return this.isSpotAvalible(r,t)?(i.x=r.x,i.y=r.y,i):this.getRandomSpot(t)},e.prototype.getRandomFly=function(){var t=Object.keys(this._flyNamesMap);return this._flyNamesMap[t[t.length*Math.random()<<0]]},e.prototype.addFly=function(t,e,o){var n=this,i=cc.instantiate(e),r=i.getComponent(c.default);return i.on(s.EventType.CONNECTED,function(){return n.onConnected()}),i.on(s.EventType.CRASHED,function(){return n.onCrashed()}),i.on(s.EventType.PROXIMITY_WARNING,function(){return n.onProximityWarning()}),i.on(s.EventType.ARRIVED,function(){return n.onArrived(i.uuid)}),r.runways=o,this.node.addChild(i),this._flys[i.uuid]=r,i.active=!0,r.applyTransform(t),r.changeSpeed(this.getGameSpeed()),r},e.prototype.addRandomFly=function(){var t=this.getRandomFly(),e=t.flyPrefab,o=t.runways;o.length<1||this.addFly(this.getRandomSpot(),e,o)},e.prototype.addDemoFly=function(){for(var t in this.initFlyNamesMap(),this._flyNamesMap){var e=this._flyNamesMap[t],o=e.flyPrefab,n=e.runways,i=this.getRandomSpot(30);this.addFly(i,o,n).disableWarningEffect=!0}},e.prototype.onConnected=function(){this.audioManager.Runway()},e.prototype.onCrashed=function(){this.audioManager.Crashland()},e.prototype.onProximityWarning=function(){this.audioManager.ProximityWarning()},e.prototype.dispatch=function(t){this.node.dispatchEvent(new cc.Event.EventCustom(t,!0))},e.prototype.setScore=function(t){this.score=t,p.default.setScore(this.node.uuid,t,this.timeConsumed),this.dispatch(s.EventType.SCORE_CHANGED)},e.prototype.onArrived=function(t){this.setScore(this.score+1),this.removeFly(t),this.audioManager.Landed()},e.prototype.getGameSpeed=function(){return this.gameSpeed},e.prototype.setGameSpeed=function(t){void 0===t&&(t=1),this.gameSpeed=t>0?t:1,this.dispatch(s.EventType.SPEED_CHANGED)},e.prototype.toggleGameSpeed=function(){var t=this.gameSpeed>1;this.setGameSpeed(t?1:2)},e.prototype.toggleSpeedup=function(){for(var t in this.toggleGameSpeed(),this._flys)this.getFly(t).changeSpeed(this.getGameSpeed())},e.prototype.getFly=function(t){return this._flys[t]},e.prototype.removeFly=function(t){this._flys[t].node.removeFromParent(!0),delete this._flys[t]},e.prototype.removeAllMovableObjects=function(){for(var t in this._flys)this.removeFly(t)},e.prototype.hideRunways=function(){this.runways.forEach(function(t){t.node.opacity=0})},e.prototype.reset=function(){this.removeAllMovableObjects(),this.hideRunways(),this.timer=0,this.timeConsumed=0,this.duration=0,this.setScore(0),this.setGameSpeed(),this.demoMode=!1,cc.director.resume()},e.prototype.restart=function(){this.setCollisionEnable(!0),this.reset(),this.node.active=!0},e.prototype.setCollisionEnable=function(t){cc.director.getCollisionManager().enabled=t},e.prototype.update=function(t){if(!p.default.debug&&!this.demoMode){if(this.timeConsumed+=t,this.getGameSpeed()*this.timer>this.duration)return this.addRandomFly(),this.duration=cc.misc.lerp(this.minDuration,this.maxDuration,Math.random()),void(this.timer=0);this.timer+=t}},r([h],e.prototype,"mapName",void 0),r([h(a.default)],e.prototype,"audioManager",void 0),r([h([u.default])],e.prototype,"runways",void 0),r([h],e.prototype,"minDuration",void 0),r([h],e.prototype,"maxDuration",void 0),r([h],e.prototype,"frameExtendedSize",void 0),r([d],e)}(cc.Component);o.default=f,cc._RF.pop()},{"./AudioManager":"AudioManager","./Constant":"Constant","./DestinationNode":"DestinationNode","./Fly":"Fly","./Storage":"Storage"}],Loading:[function(t,e,o){"use strict";cc._RF.push(e,"9ba86AwpUJHjYnOa2lpsehw","Loading");var n,i=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),r=this&&this.__decorate||function(t,e,o,n){var i,r=arguments.length,a=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,o,n);else for(var c=t.length-1;c>=0;c--)(i=t[c])&&(a=(r<3?i(a):r>3?i(e,o,a):i(e,o))||a);return r>3&&a&&Object.defineProperty(e,o,a),a};Object.defineProperty(o,"__esModule",{value:!0});var a=cc._decorator,c=a.ccclass,s=(a.property,function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return i(e,t),e.prototype.onLoad=function(){cc.director.loadScene("MainScene")},r([c],e)}(cc.Component));o.default=s,cc._RF.pop()},{}],MovableObject:[function(t,e,o){"use strict";cc._RF.push(e,"0dbf4HNiiJIJ6RnBvWb/Fbz","MovableObject");var n,i=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),r=this&&this.__decorate||function(t,e,o,n){var i,r=arguments.length,a=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,o,n);else for(var c=t.length-1;c>=0;c--)(i=t[c])&&(a=(r<3?i(a):r>3?i(e,o,a):i(e,o))||a);return r>3&&a&&Object.defineProperty(e,o,a),a};Object.defineProperty(o,"__esModule",{value:!0}),o.State=void 0;var a,c=t("./util"),s=cc._decorator,u=s.ccclass,p=s.property;(function(t){t.INITIAL="Initial",t.PILOTED="Piloted",t.UNPILOTED="Unpiloted"})(a=o.State||(o.State={}));var l=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.canvas=null,e.colorShape=null,e.whiteShape=null,e.highlightEffect=null,e.turnAroundOffset=10,e.speed=50,e.enableAutoMove=!0,e.rotateSpeed=3,e.shadowNode=null,e.disableDefaultShadow=!1,e.defaultShadowNodeOpacity=40,e.defaultShadowNodeX=5,e.defaultShadowNodeY=-16,e.defaultShadowScale=1.05,e.navigations=[],e.movable=!0,e.paused=!1,e._angle=0,e._speed=0,e._state=a.INITIAL,e._shadowNodeX=0,e._shadowNodeY=0,e.positionAt={},e}return i(e,t),e.prototype.getState=function(){return this._state},e.prototype.isState=function(t){return this._state===t},e.prototype.setState=function(t){switch(void 0===t&&(t=a.INITIAL),this._state=t,t){case a.PILOTED:this.highlightEffect.active=!1,this.whiteShape.active=!0,this.colorShape.active=!1;break;case a.UNPILOTED:this.highlightEffect.active=!0,this.whiteShape.active=!1,this.colorShape.active=!0;break;case a.INITIAL:default:this.highlightEffect.active=!1}},e.prototype.onLoad=function(){this.canvas=this.canvas||cc.Canvas.instance.node,this._speed=this._speed>0?this._speed:this.speed,this.setState(a.INITIAL),this.setShadow(),this.whiteShape.active=!1,this.colorShape.active=!0},e.prototype.getAngle=function(){return this._angle},e.prototype.setShadow=function(){this.disableDefaultShadow||this.shadowNode||(this.shadowNode=cc.instantiate(this.colorShape),this.node.addChild(this.shadowNode),this.shadowNode.setSiblingIndex(0),this.shadowNode.setPosition(this.defaultShadowNodeX,this.defaultShadowNodeY),this.shadowNode.opacity=this.defaultShadowNodeOpacity,this.shadowNode.color=cc.color(0,0,0,255),this.shadowNode.setScale(this.colorShape.scaleX*this.defaultShadowScale,this.colorShape.scaleY*this.defaultShadowScale)),this.shadowNode&&(this._shadowNodeX=this.shadowNode.x,this._shadowNodeY=this.shadowNode.y)},e.prototype.normalizeAngle=function(t){return(t=(t+360)%360)>180&&(t-=360),t},e.prototype.calculateAngle=function(t,e){return this.normalizeAngle(180*Math.atan2(e,t)/Math.PI)},e.prototype.getPositionAt=function(t){t=this.canvas.convertToWorldSpaceAR(t);var e=this.turnAroundOffset,o=this.canvas.width-e,n=this.canvas.height-e,i={};return t.x>o&&(i.right=!0),t.y>n&&(i.top=!0),t.x<e&&(i.left=!0),t.y<e&&(i.bottom=!0),i},e.prototype.isOutside=function(t){var e=this.getPositionAt(t);return Object.keys(e).some(function(t){return e[t]})},e.prototype.moveTo=function(t,e,o){var n=e.subtract(t),i=cc.misc.radiansToDegrees(-n.signAngle(cc.Vec2.RIGHT)),r=n.normalize();return cc.Vec2.multiplyScalar(r,r,o),{x:(r=t.add(r)).x,y:r.y,angle:i}},e.prototype.moveWithAngle=function(t,e,o){var n=cc.Vec2.RIGHT_R.rotate(cc.misc.degreesToRadians(e));return cc.Vec2.multiplyScalar(n,n,o),t.add(n)},e.prototype.moveToCenter=function(t,e){return this.moveTo(t,cc.Vec2.ZERO,e)},e.prototype.turnAroundFromOutside=function(t,e,o){var n={x:t.x,y:t.y,angle:o},i=this.getPositionAt(e);return i.left||i.right?n.angle=this.normalizeAngle(180-o):i.bottom||i.top?n.angle=this.normalizeAngle(360-o):(n.x=e.x,n.y=e.y),n},e.prototype.autoMove=function(t,e,o){if(this.isOutside(t))return this.moveToCenter(t,o);var n=this.moveWithAngle(t,e,o);return this.turnAroundFromOutside(t,n,e)},e.prototype.directedMove=function(t,e){for(var o={},n=!1,i=0;i<this.navigations.length;i++){var r=this.navigations[i];if(r){if(r=cc.v2(r.x,r.y),cc.Vec2.distance(t,r)>=e){o=this.moveTo(t,r,e);break}this.navigations[i]=null,n=!0}}return n&&(this.navigations=this.navigations.filter(function(t){return!!t})),o},e.prototype.isEmpty=function(t){return null==t},e.prototype.rotate=function(t){var e=this.normalizeAngle(this.node.angle),o=this.rotateSpeed*t,n=-1,i=(e-this._angle+360)%360,r=Math.abs(i);r>180&&(n=1,i=(e-this._angle)%360,r=Math.abs(i));var a=e+n*r;if(Math.abs(e-a)>=o){a=cc.misc.lerp(e,a,o),this.node.angle=a,a=c.toRadians(a);var s=this._shadowNodeX,u=this._shadowNodeY,p=s*Math.cos(a)+u*Math.sin(a),l=-s*Math.sin(a)+u*Math.cos(a);this.shadowNode.setPosition(p,l)}},e.prototype.applyTransform=function(t,e){void 0===e&&(e=0),this.isEmpty(t.angle)||(this._angle=t.angle),this.isEmpty(t.deltaX)||this.isEmpty(t.deltaY)||(this.node.x+=t.deltaX,this.node.y+=t.deltaY),this.isEmpty(t.x)||this.isEmpty(t.y)||(this.node.x=t.x,this.node.y=t.y),e>0&&this.rotate(e)},e.prototype.getPosition=function(){return this.node.getPosition()},e.prototype.canAutoMove=function(){return this.navigations.length<1},e.prototype.update=function(t){if(!this.paused&&this.movable){var e,o=this._speed*t,n=this.getPosition();e=this.canAutoMove()&&this.enableAutoMove?this.autoMove(n,this._angle,o):this.directedMove(n,o),this.applyTransform(e,t)}},e.prototype.changeSpeed=function(t){void 0===t&&(t=2),this._speed=t*this.speed},e.State=a,r([p(cc.Node)],e.prototype,"canvas",void 0),r([p(cc.Node)],e.prototype,"colorShape",void 0),r([p(cc.Node)],e.prototype,"whiteShape",void 0),r([p(cc.Node)],e.prototype,"highlightEffect",void 0),r([p],e.prototype,"turnAroundOffset",void 0),r([p],e.prototype,"speed",void 0),r([p],e.prototype,"enableAutoMove",void 0),r([p],e.prototype,"rotateSpeed",void 0),r([p(cc.Node)],e.prototype,"shadowNode",void 0),r([p],e.prototype,"disableDefaultShadow",void 0),r([p],e.prototype,"defaultShadowNodeOpacity",void 0),r([p],e.prototype,"defaultShadowNodeX",void 0),r([p],e.prototype,"defaultShadowNodeY",void 0),r([p],e.prototype,"defaultShadowScale",void 0),r([u],e)}(cc.Component);o.default=l,cc._RF.pop()},{"./util":"util"}],Runway:[function(t,e,o){"use strict";cc._RF.push(e,"d509ez0cZRIxa8J9eFJiNWT","Runway");var n,i=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),r=this&&this.__decorate||function(t,e,o,n){var i,r=arguments.length,a=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,o,n);else for(var c=t.length-1;c>=0;c--)(i=t[c])&&(a=(r<3?i(a):r>3?i(e,o,a):i(e,o))||a);return r>3&&a&&Object.defineProperty(e,o,a),a};Object.defineProperty(o,"__esModule",{value:!0});var a=t("./DestinationNode"),c=t("./util"),s=cc._decorator,u=s.ccclass,p=s.property,l=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.outerCollider=null,e.innerCollider=null,e.innerPoints=null,e.innerCentroid=null,e.outerPoints=null,e}return i(e,t),e.prototype.onLoad=function(){var t,e,o=this,n=this.node.group;null===(t=this.outerCollider)||void 0===t||(t.node.group=n),null===(e=this.innerCollider)||void 0===e||(e.node.group=n),this.innerCollider&&(this.innerPoints=this.innerCollider.points.map(function(t){return c.nodeToCanvasSpace(o.innerCollider.node,t)}),this.innerCentroid=c.calculatePolygonCentroid(this.innerPoints)),this.outerCollider&&(this.outerPoints=this.outerCollider.points.map(function(t){return c.nodeToCanvasSpace(o.outerCollider.node,t)}))},e.prototype.navigable=function(t,e){return!!this.isCollied(this.outerPoints,e)&&this.isCollied(this.innerPoints,t)},e.prototype.isCollied=function(t,e){return cc.Intersection.pointInPolygon(e,t)},e.prototype.connect=function(){var t=this.node.getPosition();return[this.innerCentroid,t]},r([p(cc.PolygonCollider)],e.prototype,"outerCollider",void 0),r([p(cc.PolygonCollider)],e.prototype,"innerCollider",void 0),r([u],e)}(a.default);o.default=l,cc._RF.pop()},{"./DestinationNode":"DestinationNode","./util":"util"}],Storage:[function(t,e,o){"use strict";function n(t){return{uuid:t,score:0,highScore:{score:0,timeConsumed:0}}}cc._RF.push(e,"91d4bHjT6dCf4EwbKqBTkHH","Storage"),Object.defineProperty(o,"__esModule",{value:!0}),o.ZeroLevelData=void 0,o.ZeroLevelData=n;var i=function(){function t(){}return t.getLevelData=function(t){var e=cc.sys.localStorage.getItem(t);return e?JSON.parse(e):n(t)},t.setLevelData=function(t,e){return cc.sys.localStorage.setItem(t,JSON.stringify(e))},t.removeLevelData=function(t){return cc.sys.localStorage.removeItem(t)},t.clear=function(){return cc.sys.localStorage.clear()},t.setScore=function(e,o,n){n=Math.floor(n);var i=!1,r=this.getLevelData(e);return r||(r={uuid:e,score:o,highScore:{score:o,timeConsumed:n}},i=!0),r.score!==o&&(r.score=o,i=!0),!t.debug&&r.highScore&&o>r.highScore.score&&(r.highScore.score=o,r.highScore.timeConsumed=n,i=!0),i&&this.setLevelData(e,r),r},t.debug=!1,t.level=null,t}();o.default=i,cc._RF.pop()},{}],ToggleButton:[function(t,e,o){"use strict";cc._RF.push(e,"92df5uCLIdEOoatj2d47dSV","ToggleButton");var n,i=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),r=this&&this.__decorate||function(t,e,o,n){var i,r=arguments.length,a=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,o,n);else for(var c=t.length-1;c>=0;c--)(i=t[c])&&(a=(r<3?i(a):r>3?i(e,o,a):i(e,o))||a);return r>3&&a&&Object.defineProperty(e,o,a),a};Object.defineProperty(o,"__esModule",{value:!0});var a=cc._decorator,c=a.ccclass,s=a.property,u=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.normalSprite=null,e.toggledSprite=null,e.toggled=!1,e}return i(e,t),e.prototype.callback=function(t){this.toggled=t.target===this.normalSprite},e.prototype.update=function(){this.normalSprite.active=!this.toggled,this.toggledSprite.active=this.toggled},r([s(cc.Node)],e.prototype,"normalSprite",void 0),r([s(cc.Node)],e.prototype,"toggledSprite",void 0),r([s],e.prototype,"toggled",void 0),r([c],e)}(cc.Component);o.default=u,cc._RF.pop()},{}],UIManager:[function(t,e,o){"use strict";cc._RF.push(e,"c9e8dmiYgRNnYOluafoCtYI","UIManager");var n,i=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),r=this&&this.__decorate||function(t,e,o,n){var i,r=arguments.length,a=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,o,n);else for(var c=t.length-1;c>=0;c--)(i=t[c])&&(a=(r<3?i(a):r>3?i(e,o,a):i(e,o))||a);return r>3&&a&&Object.defineProperty(e,o,a),a};Object.defineProperty(o,"__esModule",{value:!0});var a,c=t("./ToggleButton"),s=t("./Storage"),u=t("./util"),p=cc._decorator,l=p.ccclass,d=p.property;(function(t){t.Initial="Initial",t.Pause="Pause",t.Play="Play",t.End="End",t.SpeedUp="SpeedUp",t.SpeedDown="SpeedDown"})(a||(a={}));var h=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.gameUI=null,e.debugMenu=null,e.mainMenu=null,e.pauseMenu=null,e.endMenu=null,e.scoreLabel=null,e.highScoreLabel=null,e.speedButton=null,e.mainMenuMapName=null,e.mainMenuHighScoreLabel=null,e.mainMenuTimeConsumedLabel=null,e.muteButton=null,e}return i(e,t),e.prototype.start=function(){this.setState(a.Initial)},e.prototype.setState=function(t){switch(void 0===t&&(t=a.Initial),this.debugMenu.active=s.default.debug,t){case a.Pause:this.gameUI.active=!0,this.mainMenu.active=!1,this.pauseMenu.active=!0,this.endMenu.active=!1,this.muteButton.node.active=!0,cc.director.pause();break;case a.Play:this.gameUI.active=!0,this.mainMenu.active=!1,this.pauseMenu.active=!1,this.endMenu.active=!1,this.muteButton.node.active=!1,cc.director.resume();break;case a.End:this.mainMenu.active=!1,this.pauseMenu.active=!1,this.endMenu.active=!0,this.muteButton.node.active=!0,cc.director.pause();break;case a.Initial:default:this.gameUI.active=!1,this.mainMenu.active=!0,this.pauseMenu.active=!1,this.endMenu.active=!1,this.muteButton.node.active=!0,cc.director.resume()}},e.prototype.setSpeedButtonToggled=function(t){this.speedButton.toggled=t},e.prototype.setMuteButtonToggled=function(t){this.muteButton.toggled=t},e.prototype.updateGameUIScore=function(t){var e=s.default.getLevelData(t),o=e.highScore.score||e.score;this.highScoreLabel.string="\u6700\u9ad8\u5206: "+o,this.scoreLabel.string="\u8bc4\u5206: "+e.score},e.prototype.updateMainMenu=function(t){this.mainMenuMapName.string=t;var e=s.default.getLevelData(s.default.level.node.uuid),o=e.highScore.score||e.score,n=e.highScore.timeConsumed;this.mainMenuHighScoreLabel.string="\u6700\u9ad8\u6210\u7ee9: "+o,this.mainMenuTimeConsumedLabel.string="\u98de\u884c\u65f6\u95f4: "+u.toHHMMSS(n)},e.State=a,r([d(cc.Node)],e.prototype,"gameUI",void 0),r([d(cc.Node)],e.prototype,"debugMenu",void 0),r([d(cc.Node)],e.prototype,"mainMenu",void 0),r([d(cc.Node)],e.prototype,"pauseMenu",void 0),r([d(cc.Node)],e.prototype,"endMenu",void 0),r([d(cc.Label)],e.prototype,"scoreLabel",void 0),r([d(cc.Label)],e.prototype,"highScoreLabel",void 0),r([d(c.default)],e.prototype,"speedButton",void 0),r([d(cc.Label)],e.prototype,"mainMenuMapName",void 0),r([d(cc.Label)],e.prototype,"mainMenuHighScoreLabel",void 0),r([d(cc.Label)],e.prototype,"mainMenuTimeConsumedLabel",void 0),r([d(c.default)],e.prototype,"muteButton",void 0),r([l],e)}(cc.Component);o.default=h,cc._RF.pop()},{"./Storage":"Storage","./ToggleButton":"ToggleButton","./util":"util"}],Zindex:[function(t,e,o){"use strict";cc._RF.push(e,"87921JxajVGcbZ3fWIicHPQ","Zindex");var n,i=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),r=this&&this.__decorate||function(t,e,o,n){var i,r=arguments.length,a=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,o,n);else for(var c=t.length-1;c>=0;c--)(i=t[c])&&(a=(r<3?i(a):r>3?i(e,o,a):i(e,o))||a);return r>3&&a&&Object.defineProperty(e,o,a),a};Object.defineProperty(o,"__esModule",{value:!0});var a=cc._decorator,c=a.ccclass,s=a.property,u=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.zIndex=0,e}return i(e,t),e.prototype.onLoad=function(){this.node.zIndex=this.zIndex},r([s],e.prototype,"zIndex",void 0),r([c],e)}(cc.Component);o.default=u,cc._RF.pop()},{}],use_reversed_rotateBy:[function(t,e){"use strict";cc._RF.push(e,"7a74bBTdUxI0K9QMoGEhvxh","use_reversed_rotateBy"),cc.RotateBy._reverse=!0,cc._RF.pop()},{}],"use_v2.1-2.2.1_cc.Toggle_event":[function(t,e){"use strict";cc._RF.push(e,"a2766F6+oRMELZ++PHaLMU0","use_v2.1-2.2.1_cc.Toggle_event"),cc.Toggle&&(cc.Toggle._triggerEventInScript_isChecked=!0),cc._RF.pop()},{}],util:[function(t,e,o){"use strict";function n(t,e,o){var n=cc.v2(o.x,o.y+o.height),r=cc.v2(o.x+o.width,o.y+o.height),a=cc.v2(o.x,o.y),c=cc.v2(o.x+o.width,o.y),s={},u=i(t,e,n,r);return u?(s.top=!0,{intersection:u,positionAt:s}):(u=i(t,e,r,c))?(s.right=!0,{intersection:u,positionAt:s}):(u=i(t,e,c,a))?(s.bottom=!0,{intersection:u,positionAt:s}):(u=i(t,e,a,n))?(s.left=!0,{intersection:u,positionAt:s}):{intersection:u,positionAt:s}}function i(t,e,o,n){var i=t.x,r=t.y,a=e.x,c=e.y,s=o.x,u=o.y,p=n.x,l=n.y,d=(l-u)*(a-i)-(p-s)*(c-r);if(0!=d){var h=((p-s)*(r-u)-(l-u)*(i-s))/d,f=((a-i)*(r-u)-(c-r)*(i-s))/d;if(h>=0&&h<=1&&f>=0&&f<=1){var y=i+h*(a-i),v=r+h*(c-r);return cc.v2(y,v)}}}cc._RF.push(e,"b162ei8vIVE57Ry/+78K8+L","util"),Object.defineProperty(o,"__esModule",{value:!0}),o.drawPoints=o.drawQuadraticCurve=o.drawQuadraticDashedCurve=o.calculatePolygonCentroid=o.nodeToCanvasSpace=o.calculateOutOfViewPos=o.checkIntersection=o.lineRectOne=o.toRadians=o.toHHMMSS=void 0,o.toHHMMSS=function(t){var e=parseInt(t,10);return[Math.floor(e/3600),Math.floor(e/60)%60,e%60].map(function(t){return t<10?"0"+t:t}).filter(function(t,e){return"00"!==t||e>0}).join(":")},o.toRadians=function(t){return t*(Math.PI/180)},o.lineRectOne=n,o.checkIntersection=i,o.calculateOutOfViewPos=function(t){t=cc.Canvas.instance.node.convertToWorldSpaceAR(t);var e=cc.winSize.width,o=cc.winSize.height;return n(t,cc.v2(e/2,o/2),cc.rect(0,0,e,o))},o.nodeToCanvasSpace=function(t,e){return e=t.convertToWorldSpaceAR(e),cc.Canvas.instance.node.convertToNodeSpaceAR(e)},o.calculatePolygonCentroid=function(t){for(var e=cc.v2(0,0),o=0;o<t.length;o++)e=e.add(t[o]);return e.divide(t.length)},o.drawQuadraticDashedCurve=function(t,e,o){t.moveTo(e.x,e.y);var n=o.length;if(n>=2){for(var i=void 0,r=void 0,a=0;a<=n-2;a++){i=o[a];var c=((r=o[a+1]).x-i.x)/3,s=(r.y-i.y)/3;t.quadraticCurveTo(i.x,i.y,i.x+c,i.y+s),t.moveTo(i.x+2*c,i.y+2*s)}t.lineTo(r.x,r.y)}else{if(1!==n)return;t.lineTo(o[0].x,o[0].y)}t.stroke()},o.drawQuadraticCurve=function(t,e,o){t.moveTo(e.x,e.y);var n=o.length;if(n>=2)for(var i=0;i<=n-2;i++){var r=o[i],a=o[i+1],c=(r.x+a.x)/2,s=(r.y+a.y)/2;i===n-2?t.quadraticCurveTo(c,s,a.x,a.y):t.quadraticCurveTo(r.x,r.y,c,s)}else{if(1!==n)return;t.lineTo(o[0].x,o[0].y)}t.stroke()},o.drawPoints=function(t,e,o){void 0===o&&(o=cc.color(255,0,0));for(var n=0;n<e.length;n++){var i=e[n];t.circle(i.x,i.y,2)}t.fillColor=cc.color(255,0,0),t.fill()},cc._RF.pop()},{}]},{},["AudioManager","AutoFitCanvas","Canvas","Constant","CrashCollider","DestinationNode","Fly","Helipad","Level","Loading","MovableObject","Runway","Storage","ToggleButton","UIManager","Zindex","util","use_reversed_rotateBy","use_v2.1-2.2.1_cc.Toggle_event"]);